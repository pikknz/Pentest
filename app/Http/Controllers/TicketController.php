<?php

namespace App\Http\Controllers;

use App\Models\Ticket;

class TicketController extends Controller
{
    const TICKET_PROCESSED = 1;
    /**
     * Create a number of dummy tickets in the database
     */
    public function createTickets($count): void
    {
        Ticket::factory()->count($count)->create();
    }

    /**
     * Process a number of  tickets in the database
     */
    public function processTickets($count): void
    {
        $ticketsToBeProcessed = Ticket::orderBy('created_at','DESC')->limit($count)->get();
        foreach($ticketsToBeProcessed as $ticket){
            $ticket->status = TicketController::TICKET_PROCESSED;
            $ticket->save();
        }
    }
}
